(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{305:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t.n(a),i=t(4),c=t.n(i),o=t(1),s=t.n(o),l=t(0),m=t.n(l),d=t(17),u=t(18),p=t.n(u),f=t(3),h=t.n(f),g=t(9),b=t.n(g),v=t(7),y=function(){return m.a.createElement("svg",{className:"icon icon-check-circle",viewBox:"0 0 50 50",fill:"none"},m.a.createElement("path",{d:"M25 49c13.255 0 24-10.745 24-24S38.255 1 25 1 1 11.745 1 25s10.745 24 24 24z"}),m.a.createElement("path",{d:"M15 24.51l7.307 7.308L35.125 19"}))};t(9)("\n  .icon.icon-check-circle\n    path\n      stroke: #1990c6\n      stroke-width: 2\n");var w=t(6),E=t(5),x=t(86),N=t.n(x),k=t(91),O=t(46),j=t.n(O),I=t(35),z=new j.a.providers.Web3Provider(window.ethereum),C=["event OfferCreated (address indexed party, uint indexed listingID, uint indexed offerID, bytes32 ipfsHash)",{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],name:"offers",outputs:[{name:"value",type:"uint256"},{name:"commission",type:"uint256"},{name:"refund",type:"uint256"},{name:"currency",type:"address"},{name:"buyer",type:"address"},{name:"affiliate",type:"address"},{name:"arbitrator",type:"address"},{name:"finalizes",type:"uint256"},{name:"status",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"}];window.provider=z;var D=new j.a.utils.Interface(C),S=new j.a.Contract("0x9FBDa871d559710256a2502A2517b794B482Db40",C,z);function B(){return(B=c()(r.a.mark((function e(n,t,a){var i,c,o,s,l,m,d,u,p,f,g,b,v,y;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.indexOf("0x")){e.next=22;break}return s=h()(a,"listingId"),e.next=4,z.getTransactionReceipt(n);case 4:if(l=e.sent){e.next=8;break}return console.log("Could not find receipt"),e.abrupt("return",null);case 8:return m=l.logs.map((function(e){try{return D.parseLog(e)}catch(e){}})).filter((function(e){return e})).find((function(e){return"OfferCreated"===e.name})),d=m.args.listingID.toNumber(),u=m.args.offerID.toNumber(),p=m.args.ipfsHash,e.next=14,Object(I.get)(a.ipfsGateway,p,1e4);case 14:return f=e.sent,i=f.encryptedData,c="".concat(s,"-").concat(u),e.next=19,S.offers(d,u);case 19:o=e.sent,e.next=23;break;case 22:i=n;case 23:return e.prev=23,e.next=26,Object(I.get)(a.ipfsGateway,i,1e4);case 26:return g=e.sent,e.next=29,openpgp.message.readArmored(g.buyerData);case 29:return b=e.sent,e.next=32,openpgp.decrypt({message:b,passwords:[t]});case 32:return v=e.sent,(y=JSON.parse(v.data)).offerId=c,e.abrupt("return",{cart:y,offer:o});case 38:return e.prev=38,e.t0=e.catch(23),e.abrupt("return",null);case 41:case"end":return e.stop()}}),e,null,[[23,38]])})))).apply(this,arguments)}var L=function(e,n,t){return B.apply(this,arguments)},M=function(e){var n=e.cart,t=Object(E.a)().config;if(!n)return m.a.createElement("div",null,"Loading...");var a=h()(n,"userInfo.phone");return m.a.createElement("div",{className:"checkout-confirmation"},m.a.createElement("div",{className:"d-none d-md-block"},m.a.createElement("h3",null,t.fullTitle)),m.a.createElement("div",{className:"thankyou"},m.a.createElement("div",{className:"check"},m.a.createElement(y,null)),m.a.createElement("div",{className:"details"},n.offerId?m.a.createElement("div",{className:"order-number"},"Order #".concat(n.offerId)):null,m.a.createElement("div",{className:"name"},"Thank you ".concat(h()(n,"userInfo.firstName")),"!"))),m.a.createElement("div",{className:"order-confirmed"},m.a.createElement("div",{className:"title"},"Your order is confirmed"),m.a.createElement("div",{className:"description"},"Youâ€™ll receive an email when your order is ready.")),m.a.createElement("div",{className:"customer-info"},m.a.createElement("h4",null,"Customer information"),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-md-6"},m.a.createElement("h5",null,"Contact information"),m.a.createElement("div",{className:"value"},h()(n,"userInfo.email")),a?m.a.createElement("div",{className:"value"},a):null),m.a.createElement("div",{className:"col-md-6"},m.a.createElement("h5",null,"Payment method"),m.a.createElement("div",{className:"value"},h()(n,"paymentMethod.label")))),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-md-6"},m.a.createElement("h5",null,"Shipping address"),m.a.createElement("div",{className:"value"},N()(n.userInfo).map((function(e,n){return m.a.createElement("div",{key:n},e)})))),m.a.createElement("div",{className:"col-md-6"},m.a.createElement("h5",null,"Billing address"),m.a.createElement("div",{className:"value"},N()(n.userInfo,n.userInfo.billingDifferent?"billing":null).map((function(e,n){return m.a.createElement("div",{key:n},e)}))))),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-md-6"},m.a.createElement("h5",null,"Shipping method"),h()(n,"shipping.label")))),m.a.createElement("div",{className:"actions"},m.a.createElement("div",null,"Need help?"," ",m.a.createElement("a",{href:"mailto:".concat(t.supportEmailPlain)},"Contact us")),m.a.createElement(v.a,{className:"btn btn-primary btn-lg",to:"/"},"Continue shopping")))};n.default=function(){var e=Object(E.a)().config,n=Object(l.useState)(),t=s()(n,2),a=t[0],i=t[1],o=Object(l.useState)(),u=s()(o,2),f=u[0],h=u[1],g=Object(w.b)(),v=s()(g,2)[1],y=Object(d.i)("/order/:tx"),x=Object(d.h)(),N=p.a.parse(x.search);return Object(l.useEffect)((function(){function n(){return(n=c()(r.a.mark((function n(){var t;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L(y.params.tx,N.auth,e);case 2:(t=n.sent)?(console.log({result:t}),i(t.cart),h(!1),v({type:"orderComplete"})):h(!0);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[y.params.tx,N.auth]),Object(l.useEffect)((function(){window.orderCss||(b.a.addStylesheet(),window.orderCss=!0)}),[]),f?(console.error(f),m.a.createElement("div",{className:"checkout"},m.a.createElement("h3",{className:"d-md-none my-4 ml-4"},e.title),m.a.createElement("div",{className:"user-details"},"Error loading order"),m.a.createElement("div",{className:"order-summary-wrap"}))):a?m.a.createElement("div",{className:"checkout"},m.a.createElement("h3",{className:"d-md-none my-4 ml-4"},e.title),m.a.createElement("div",{className:"user-details"},m.a.createElement(M,{cart:a})),m.a.createElement("div",{className:"order-summary-wrap"},m.a.createElement(k.a,{cart:a}))):m.a.createElement("div",{className:"loading-fullpage"},"Loading")};t(9)("\n  .checkout\n    display: flex\n    h3,h4,h5\n      font-weight: 400\n    .breadcrumbs\n      font-size: 0.8rem\n      a\n        color: #1990c6\n    > .user-details\n      flex: 7\n      padding: 3rem\n      display: flex\n      justify-content: flex-end\n      .checkout-information,.checkout-shipping\n        padding: 1rem\n        max-width: 600px\n        width: 100%\n      .actions\n        display: flex\n        justify-content: space-between\n        align-items: center\n        margin-top: 2rem\n    > .order-summary-wrap\n      padding: 3rem\n      flex: 6\n      min-height: 100vh\n      border-width: 0 0 0 1px\n      border-style: solid\n      border-color: #ddd\n      background: #f6f6f6\n\n\n  @media (max-width: 767.98px)\n    .checkout\n      flex-direction: column\n      > .user-details\n        padding: 1rem\n        order: 2\n        .checkout-information,.checkout-shipping\n          padding: 1rem 0\n        .actions\n          flex-direction: column-reverse\n          *\n            margin-bottom: 2rem\n      > .order-summary-wrap\n        padding: 1rem 1.25rem\n        border-width: 1px 0 1px 0\n        min-height: 0\n        .toggle-order-summary\n          display: flex\n          justify-content: space-between\n          .toggle\n            color: #1990c6\n          .icon-caret\n            fill: #1990c6\n            margin-left: 0.5rem\n          .icon-cart\n            margin-right: 0.5rem\n            width: 1.5rem\n          &.active\n            .icon-caret\n              transform: scaleY(-1)\n\n        .order-summary\n          margin-top: 2rem\n          display: none\n          &.show\n            display: block\n\n"),t(9)("\n  .order-summary\n    max-width: 430px\n    .item\n      display: flex\n      align-items: center\n      margin-bottom: 1rem\n      width: 100%\n      .title\n        font-weight: bold\n        flex: 1\n        .cart-options\n          font-size: 0.8rem\n          font-weight: normal\n      .price\n        font-weight: bold\n      .image\n        position: relative\n        margin-right: 1rem\n        .product-pic\n          border-radius: 0.5rem\n          border: 1px solid #ddd\n          min-width: 3rem\n        span\n          position: absolute\n          display: block\n          top: -0.5rem\n          right: -0.5rem\n          padding: 0.125rem 0.5rem\n          background: #999\n          color: #fff\n          border-radius: 1rem\n          font-size: 0.75rem\n    img\n      max-width: 60px\n    .sub-total,.total\n      margin-top: 1rem\n      padding-top: 1rem\n      border-top: 1px solid #ddd\n      > div\n        display: flex\n        justify-content: space-between\n        margin-bottom: 0.5rem\n    .total\n      font-size: 1.25rem\n\n"),t(9)("\n  .checkout-confirmation\n    width: 100%\n    max-width: 570px\n    .icon-check-circle\n      width: 3rem\n    .thankyou\n      display: flex\n      align-items: center\n      margin-top: 1rem\n      .check\n        margin-right: 1rem\n      .order-number\n        font-size: 0.875rem\n        color: #666\n      .name\n        font-size: 1.25rem\n    .order-confirmed\n      margin-top: 2rem\n      border: 1px solid #ddd\n      border-radius: 0.25rem\n      padding: 1rem\n      .title\n        font-size: 1.25rem\n        margin-bottom: 0.25rem\n      .description\n        color: #666\n    .customer-info\n      margin-top: 2rem\n      border: 1px solid #ddd\n      border-radius: 0.25rem\n      padding: 1rem\n      font-size: 0.875rem\n      color: #555\n      h4\n        font-size: 1.125rem\n        color: #333\n        margin-bottom: 0.25rem\n      h5\n        font-size: 0.875rem\n        margin-top: 1rem\n        font-weight: 500\n        color: #333\n\n")}}]);